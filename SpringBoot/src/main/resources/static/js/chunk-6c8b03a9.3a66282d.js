(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c8b03a9"],{"2e06":function(e,t,o){},"349a":function(e,t,o){"use strict";o("bbf1")},"5c64":function(e,t,o){"use strict";o("2e06")},"73cf":function(e,t,o){"use strict";o.r(t);o("cae4");var r=o("6e64");const a=e=>(Object(r["pushScopeId"])("data-v-70b225b5"),e=e(),Object(r["popScopeId"])(),e),c={class:"login-container"},l=a(()=>Object(r["createElementVNode"])("h2",{class:"title",style:{"margin-bottom":"20px"}},"用户注册",-1)),d={style:{display:"flex"}};function i(e,t,o,a,i,n){const s=Object(r["resolveComponent"])("User"),u=Object(r["resolveComponent"])("el-icon"),m=Object(r["resolveComponent"])("el-input"),b=Object(r["resolveComponent"])("el-form-item"),f=Object(r["resolveComponent"])("Lock"),h=Object(r["resolveComponent"])("el-radio"),p=Object(r["resolveComponent"])("ValidCode"),j=Object(r["resolveComponent"])("el-button"),O=Object(r["resolveComponent"])("el-form");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",c,[Object(r["createVNode"])(O,{ref:"form",model:i.form,rules:i.rules,class:"login-page"},{default:Object(r["withCtx"])(()=>[l,Object(r["createVNode"])(b,{prop:"username"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(m,{modelValue:i.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.username=e),placeholder:"请输入用户名",clearable:""},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(u,{class:"el-input__icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(s)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(r["createVNode"])(b,{prop:"password"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(m,{modelValue:i.form.password,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.password=e),placeholder:"请输入密码",clearable:"","show-password":""},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(u,{class:"el-input__icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(r["createVNode"])(b,{prop:"confirm"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(m,{modelValue:i.form.confirm,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.confirm=e),placeholder:"请再次确认密码",clearable:"","show-password":""},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(u,{class:"el-input__icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),Object(r["createVNode"])(b,{prop:"role"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(h,{modelValue:i.form.role,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.role=e),label:"2"},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])("读者")]),_:1},8,["modelValue"]),Object(r["createVNode"])(h,{modelValue:i.form.role,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.role=e),label:"1"},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])("管理员")]),_:1},8,["modelValue"])]),_:1}),1==i.form.role?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,prop:"authorize"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(m,{modelValue:i.form.authorize,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.authorize=e),placeholder:"请输入管理员注册码",clearable:"","show-password":""},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(u,{class:"el-input__icon"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(f)]),_:1})]),_:1},8,["modelValue"])]),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",d,[Object(r["createVNode"])(m,{modelValue:i.form.validCode,"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.validCode=e),style:{width:"45%"},placeholder:"请输入验证码"},null,8,["modelValue"]),Object(r["createVNode"])(p,{onInput:n.createValidCode,style:{width:"50%"}},null,8,["onInput"])])]),_:1}),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(j,{type:"primary",style:{width:"100%"},onClick:n.register},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])("注 册")]),_:1},8,["onClick"])]),_:1}),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(j,{type:"text",onClick:t[7]||(t[7]=t=>e.$router.push("/login"))},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])("前往登录>> ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}var n=o("b775"),s=o("3246"),u=o("df8f"),m={name:"Login",components:{ValidCode:u["a"]},data(){return{form:{},validCode:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:13,message:"长度要求为2到13位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],confirm:[{required:!0,message:"请确认密码",trigger:"blur"}],authorize:[{required:!0,message:"请输入注册码",trigger:"blur"}]}}},methods:{createValidCode(e){this.validCode=e},register(){this.$refs["form"].validate(e=>{if(e){if(!this.form.validCode)return void s["a"].error("请填写验证码");if(this.form.validCode.toLowerCase()!==this.validCode.toLowerCase())return void s["a"].error("验证码错误");if(this.form.password!=this.form.confirm)return void s["a"].error("两次密码输入不一致");if(1==this.form.role&&"1234"!=this.form.authorize)return void s["a"].error("请输入正确的注册码");n["a"].post("user/register",this.form).then(e=>{0==e.code?(s["a"].success("注册成功"),this.$router.push("/login")):s["a"].error(e.msg)})}})}}},b=(o("5c64"),o("254b")),f=o.n(b);const h=f()(m,[["render",i],["__scopeId","data-v-70b225b5"]]);t["default"]=h},bbf1:function(e,t,o){},df8f:function(e,t,o){"use strict";var r=o("6e64");function a(e,t,o,a,c,l){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{class:"ValidCode disabled-select",style:Object(r["normalizeStyle"])(`width:${o.width}; height:${o.height}`),onClick:t[0]||(t[0]=(...e)=>l.refreshCode&&l.refreshCode(...e))},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(c.codeList,(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",{key:t,style:Object(r["normalizeStyle"])(l.getStyle(e))},Object(r["toDisplayString"])(e.code),5))),128))],4)}o("cae4");var c={name:"ValidCode",model:{prop:"value",event:"input"},props:{width:{type:String,default:"100px"},height:{type:String,default:"40px"},length:{type:Number,default:4},refresh:{type:Number}},data(){return{codeList:[]}},watch:{refresh(){this.createdCode()}},mounted(){this.createdCode()},methods:{refreshCode(){this.createdCode()},createdCode(){const e=this.length,t=[],o="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",r=o.length;for(let a=0;a<e;a++){const e=[Math.round(220*Math.random()),Math.round(240*Math.random()),Math.round(200*Math.random())];t.push({code:o.charAt(Math.floor(Math.random()*r)),color:`rgb(${e})`,fontSize:+[Math.floor(10*Math.random())]+6+10+"px",padding:[Math.floor(10*Math.random())]+"px",transform:`rotate(${Math.floor(90*Math.random())-Math.floor(90*Math.random())}deg)`})}this.codeList=t,this.$emit("input",t.map(e=>e.code).join(""))},getStyle(e){return`color: ${e.color}; font-size: ${e.fontSize}; padding: ${e.padding}; transform: ${e.transform}`}}},l=(o("349a"),o("254b")),d=o.n(l);const i=d()(c,[["render",a],["__scopeId","data-v-4bf328f2"]]);t["a"]=i}}]);
//# sourceMappingURL=chunk-6c8b03a9.3a66282d.js.map